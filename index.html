<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExoiDuino by Exoid Robotics</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
</head>
<body>
    <header>
        <h1><i class="fas fa-robot"></i> ExoiDuino by Exoid Robotics</h1>
    </header>

    <div class="container">
        <div id="blocklyArea">
            <div id="blocklyDiv" style="height: 100%; width: 100%;"></div>
        </div>

        <div id="codeArea">
            <h2><i class="fas fa-code"></i> Arduino Code</h2>
            <div class="controls">
                 <div class="control-item">
                    <label for="boardSelector"><i class="fas fa-microchip"></i> Board:</label>
                    <select id="boardSelector">
                        <option value="uno" selected>Arduino Uno</option>
                        <option value="nano">Arduino Nano</option>
                        <option value="mega">Arduino Mega</option>
                        </select>
                 </div>
                 <div class="control-item">
                    <label for="portSelector"><i class="fas fa-plug"></i> Port:</label>
                    <select id="portSelector" disabled>
                        <option value="">-- Select Port --</option>
                    </select>
                    <button id="refreshPortsButton" title="Refresh Serial Ports">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                 </div>
                 <div class="control-item">
                    <button id="uploadButton" title="Generate Code & Connect via Web Serial">
                        <i class="fas fa-upload"></i> Upload
                    </button>
                    <button id="serialButton" title="Open Serial Monitor (Coming Soon!)">
                        <i class="fas fa-terminal"></i> Serial
                    </button>
                </div>
            </div>
            <pre><code id="codeDiv" class="language-cpp">/* Add blocks to generate Arduino code! */</code></pre>
            <div id="statusMessages" class="status-messages"></div>
        </div>
    </div>

    <xml id="toolbox" style="display: none">
         <category name="Structure" colour="180"> <block type="arduino_setup"></block> <block type="arduino_loop"></block> </category>
        <category name="Line Follower" colour="#FF6680"> <block type="l298n_setup"> <field name="ENA">5</field> <field name="IN1">7</field> <field name="IN2">8</field> <field name="ENB">6</field> <field name="IN3">9</field> <field name="IN4">10</field> </block> <block type="l298n_motor"> <field name="MOTOR_CHOICE">A</field> <field name="DIRECTION">FORWARD</field> <value name="SPEED"> <shadow type="math_number"> <field name="NUM">200</field> </shadow> </value> </block> <block type="l298n_stop_motors"></block> </category>
        <category name="Logic" colour="210"> <block type="controls_if"></block> <block type="logic_compare"></block> <block type="logic_operation"></block> <block type="logic_negate"></block> <block type="logic_boolean"></block> </category>
        <category name="Loops" colour="120"> <block type="controls_repeat_ext"> <value name="TIMES"> <shadow type="math_number"><field name="NUM">10</field></shadow> </value> </block> <block type="controls_whileUntil"></block> <block type="controls_for"> <value name="FROM"><shadow type="math_number"><field name="NUM">1</field></shadow></value> <value name="TO"><shadow type="math_number"><field name="NUM">10</field></shadow></value> <value name="BY"><shadow type="math_number"><field name="NUM">1</field></shadow></value> </block> <block type="controls_flow_statements"></block> </category>
        <category name="Math" colour="230"> <block type="math_number"></block> <block type="math_arithmetic"></block> <block type="math_single"></block> <block type="math_random_int"> <value name="FROM"><shadow type="math_number"><field name="NUM">1</field></shadow></value> <value name="TO"><shadow type="math_number"><field name="NUM">100</field></shadow></value> </block> </category>
        <category name="Text" colour="160"> <block type="text"></block> <block type="text_print"> <value name="TEXT"> <shadow type="text"> <field name="TEXT">abc</field> </shadow> </value> </block> </category>
        <category name="Variables" colour="330" custom="VARIABLE"></category>
        <category name="Functions" colour="290" custom="PROCEDURE"></category>
        <sep></sep>
        <category name="Sensors" colour="40"> <block type="sensor_light_condition">
                <field name="STATE">DARK</field>
                </block>
            <block type="sensor_light_value">
                </block>
            <block type="sensor_potentiometer">
                <field name="UNIT">VALUE</field>
            </block>
        </category>
        <category name="Arduino IO" colour="260"> <block type="inout_buildin_led_blink"> <value name="DELAY_TIME"> <shadow type="math_number"> <field name="NUM">1000</field> </shadow> </value> </block> <block type="io_digitalwrite"> <field name="PIN">13</field> <field name="STATE">HIGH</field> </block> <block type="io_digitalread"> <field name="PIN">2</field> </block> <block type="io_pwm_write"> <value name="VALUE"> <shadow type="math_number"><field name="NUM">128</field></shadow> </value> </block> <block type="io_analogread"> <field name="PIN">A0</field> </block> <block type="io_pinmode"> <field name="PIN">13</field> <field name="MODE">OUTPUT</field> </block> </category>
        <category name="Arduino Time" colour="140"> <block type="time_delay"> <value name="DELAY_TIME_MILI"> <shadow type="math_number"><field name="NUM">1000</field></shadow> </value> </block> <block type="time_delaymicros"> <value name="DELAY_TIME_MICRO"> <shadow type="math_number"><field name="NUM">100</field></shadow> </value> </block> <block type="time_millis"></block> <block type="time_micros"></block> </category>
         <category name="Arduino Serial" colour="170"> <block type="serial_setup"> <field name="BAUD">9600</field> </block> <block type="serial_print"> <value name="CONTENT"> <shadow type="text"><field name="TEXT">Hello Arduino!</field></shadow> </value> </block> <block type="serial_available"></block> <block type="serial_read"></block> </category>
    </xml>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.2.0/blockly.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.2.0/blocks.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.2.0/msg/en.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.2.0/javascript.min.js"></script>

    <script src="libs/generator/arduino_generator_init.js" defer></script>
    <script src="libs/generator/structure.js" defer></script>
    <script src="libs/generator/logic.js" defer></script>
    <script src="libs/generator/loops.js" defer></script>
    <script src="libs/generator/math.js" defer></script>
    <script src="libs/generator/text.js" defer></script>
    <script src="libs/generator/variables.js" defer></script>
    <script src="libs/generator/procedures.js" defer></script>
    <script src="libs/generator/arduino_io.js" defer></script>
    <script src="libs/generator/arduino_time.js" defer></script>
    <script src="libs/generator/arduino_serial.js" defer></script>
    <script src="libs/generator/sensors.js" defer></script>
    <script src="libs/generator/l298n.js" defer></script>
    <script src="libs/generator/blink.js" defer></script>
    <script src="app.js" defer></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js" defer></script>

    </body>
</html>
